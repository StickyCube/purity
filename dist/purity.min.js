!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.purity=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/copy"),f=a("es5-ext/object/map"),g=a("es5-ext/object/valid-callable"),h=a("es5-ext/object/valid-value"),i=Function.prototype.bind,j=Object.defineProperty,k=Object.prototype.hasOwnProperty;d=function(a,b,c){var d,f=h(b)&&g(b.value);return d=e(b),delete d.writable,delete d.value,d.get=function(){return k.call(this,a)?f:(b.value=i.call(f,null==c?this:this[c]),j(this,a,b),this[a])},d},b.exports=function(a){var b=arguments[1];return f(a,function(a,c){return d(c,a,b)})}},{"es5-ext/object/copy":15,"es5-ext/object/map":23,"es5-ext/object/valid-callable":29,"es5-ext/object/valid-value":30}],2:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/assign"),f=a("es5-ext/object/normalize-options"),g=a("es5-ext/object/is-callable"),h=a("es5-ext/string/#/contains");d=b.exports=function(a,b){var c,d,g,i,j;return arguments.length<2||"string"!=typeof a?(i=b,b=a,a=null):i=arguments[2],null==a?(c=g=!0,d=!1):(c=h.call(a,"c"),d=h.call(a,"e"),g=h.call(a,"w")),j={value:b,configurable:c,enumerable:d,writable:g},i?e(f(i),j):j},d.gs=function(a,b,c){var d,i,j,k;return"string"!=typeof a?(j=c,c=b,b=a,a=null):j=arguments[3],null==b?b=void 0:g(b)?null==c?c=void 0:g(c)||(j=c,c=void 0):(j=b,b=c=void 0),null==a?(d=!0,i=!1):(d=h.call(a,"c"),i=h.call(a,"e")),k={get:b,set:c,configurable:d,enumerable:i},j?e(f(j),k):k}},{"es5-ext/object/assign":12,"es5-ext/object/is-callable":18,"es5-ext/object/normalize-options":24,"es5-ext/string/#/contains":31}],3:[function(a,b,c){"use strict";var d=a("../../object/valid-value");b.exports=function(){return d(this).length=0,this}},{"../../object/valid-value":30}],4:[function(a,b,c){"use strict";var d=a("../../number/to-pos-integer"),e=a("../../object/valid-value"),f=Array.prototype.indexOf,g=Object.prototype.hasOwnProperty,h=Math.abs,i=Math.floor;b.exports=function(a){var b,c,j,k;if(a===a)return f.apply(this,arguments);for(c=d(e(this).length),j=arguments[1],j=isNaN(j)?0:j>=0?i(j):d(this.length)-i(h(j)),b=j;c>b;++b)if(g.call(this,b)&&(k=this[b],k!==k))return b;return-1}},{"../../number/to-pos-integer":10,"../../object/valid-value":30}],5:[function(a,b,c){"use strict";var d=Object.prototype.toString,e=d.call(function(){return arguments}());b.exports=function(a){return d.call(a)===e}},{}],6:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Math.sign:a("./shim")},{"./is-implemented":7,"./shim":8}],7:[function(a,b,c){"use strict";b.exports=function(){var a=Math.sign;return"function"!=typeof a?!1:1===a(10)&&-1===a(-20)}},{}],8:[function(a,b,c){"use strict";b.exports=function(a){return a=Number(a),isNaN(a)||0===a?a:a>0?1:-1}},{}],9:[function(a,b,c){"use strict";var d=a("../math/sign"),e=Math.abs,f=Math.floor;b.exports=function(a){return isNaN(a)?0:(a=Number(a),0!==a&&isFinite(a)?d(a)*f(e(a)):a)}},{"../math/sign":6}],10:[function(a,b,c){"use strict";var d=a("./to-integer"),e=Math.max;b.exports=function(a){return e(0,d(a))}},{"./to-integer":9}],11:[function(a,b,c){"use strict";var d=a("./valid-callable"),e=a("./valid-value"),f=Function.prototype.bind,g=Function.prototype.call,h=Object.keys,i=Object.prototype.propertyIsEnumerable;b.exports=function(a,b){return function(c,j){var k,l=arguments[2],m=arguments[3];return c=Object(e(c)),d(j),k=h(c),m&&k.sort("function"==typeof m?f.call(m,c):void 0),"function"!=typeof a&&(a=k[a]),g.call(a,k,function(a,d){return i.call(c,a)?g.call(j,l,c[a],a,c,d):b})}}},{"./valid-callable":29,"./valid-value":30}],12:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":13,"./shim":14}],13:[function(a,b,c){"use strict";b.exports=function(){var a,b=Object.assign;return"function"!=typeof b?!1:(a={foo:"raz"},b(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],14:[function(a,b,c){"use strict";var d=a("../keys"),e=a("../valid-value"),f=Math.max;b.exports=function(a,b){var c,g,h,i=f(arguments.length,2);for(a=Object(e(a)),h=function(d){try{a[d]=b[d]}catch(e){c||(c=e)}},g=1;i>g;++g)b=arguments[g],d(b).forEach(h);if(void 0!==c)throw c;return a}},{"../keys":20,"../valid-value":30}],15:[function(a,b,c){"use strict";var d=a("./assign"),e=a("./valid-value");b.exports=function(a){var b=Object(e(a));return b!==a?b:d({},a)}},{"./assign":12,"./valid-value":30}],16:[function(a,b,c){"use strict";var d,e=Object.create;a("./set-prototype-of/is-implemented")()||(d=a("./set-prototype-of/shim")),b.exports=function(){var a,b,c;return d?1!==d.level?e:(a={},b={},c={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){return"__proto__"===a?void(b[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(b[a]=c)}),Object.defineProperties(a,b),Object.defineProperty(d,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a}),function(b,c){return e(null===b?a:b,c)}):e}()},{"./set-prototype-of/is-implemented":27,"./set-prototype-of/shim":28}],17:[function(a,b,c){"use strict";b.exports=a("./_iterate")("forEach")},{"./_iterate":11}],18:[function(a,b,c){"use strict";b.exports=function(a){return"function"==typeof a}},{}],19:[function(a,b,c){"use strict";var d={"function":!0,object:!0};b.exports=function(a){return null!=a&&d[typeof a]||!1}},{}],20:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":21,"./shim":22}],21:[function(a,b,c){"use strict";b.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},{}],22:[function(a,b,c){"use strict";var d=Object.keys;b.exports=function(a){return d(null==a?a:Object(a))}},{}],23:[function(a,b,c){"use strict";var d=a("./valid-callable"),e=a("./for-each"),f=Function.prototype.call;b.exports=function(a,b){var c={},g=arguments[2];return d(b),e(a,function(a,d,e,h){c[d]=f.call(b,g,a,d,e,h)}),c}},{"./for-each":17,"./valid-callable":29}],24:[function(a,b,c){"use strict";var d=Array.prototype.forEach,e=Object.create,f=function(a,b){var c;for(c in a)b[c]=a[c]};b.exports=function(a){var b=e(null);return d.call(arguments,function(a){null!=a&&f(Object(a),b)}),b}},{}],25:[function(a,b,c){"use strict";var d=Array.prototype.forEach,e=Object.create;b.exports=function(a){var b=e(null);return d.call(arguments,function(a){b[a]=!0}),b}},{}],26:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.setPrototypeOf:a("./shim")},{"./is-implemented":27,"./shim":28}],27:[function(a,b,c){"use strict";var d=Object.create,e=Object.getPrototypeOf,f={};b.exports=function(){var a=Object.setPrototypeOf,b=arguments[0]||d;return"function"!=typeof a?!1:e(a(b(null),f))===f}},{}],28:[function(a,b,c){"use strict";var d,e=a("../is-object"),f=a("../valid-value"),g=Object.prototype.isPrototypeOf,h=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};d=function(a,b){if(f(a),null===b||e(b))return a;throw new TypeError("Prototype must be null or an object")},b.exports=function(a){var b,c;return a?(2===a.level?a.set?(c=a.set,b=function(a,b){return c.call(d(a,b),b),a}):b=function(a,b){return d(a,b).__proto__=b,a}:b=function e(a,b){var c;return d(a,b),c=g.call(e.nullPolyfill,a),c&&delete e.nullPolyfill.__proto__,null===b&&(b=e.nullPolyfill),a.__proto__=b,c&&h(e.nullPolyfill,"__proto__",i),a},Object.defineProperty(b,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a,b=Object.create(null),c={},d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{a=d.set,a.call(b,c)}catch(e){}if(Object.getPrototypeOf(b)===c)return{set:a,level:2}}return b.__proto__=c,Object.getPrototypeOf(b)===c?{level:2}:(b={},b.__proto__=c,Object.getPrototypeOf(b)===c?{level:1}:!1)}()),a("../create")},{"../create":16,"../is-object":19,"../valid-value":30}],29:[function(a,b,c){"use strict";b.exports=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");return a}},{}],30:[function(a,b,c){"use strict";b.exports=function(a){if(null==a)throw new TypeError("Cannot use null or undefined");return a}},{}],31:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":32,"./shim":33}],32:[function(a,b,c){"use strict";var d="razdwatrzy";b.exports=function(){return"function"!=typeof d.contains?!1:d.contains("dwa")===!0&&d.contains("foo")===!1}},{}],33:[function(a,b,c){"use strict";var d=String.prototype.indexOf;b.exports=function(a){return d.call(this,a,arguments[1])>-1}},{}],34:[function(a,b,c){"use strict";var d=Object.prototype.toString,e=d.call("");b.exports=function(a){return"string"==typeof a||a&&"object"==typeof a&&(a instanceof String||d.call(a)===e)||!1}},{}],35:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/set-prototype-of"),f=a("es5-ext/string/#/contains"),g=a("d"),h=a("./"),i=Object.defineProperty;d=b.exports=function(a,b){return this instanceof d?(h.call(this,a),b=b?f.call(b,"key+value")?"key+value":f.call(b,"key")?"key":"value":"value",void i(this,"__kind__",g("",b))):new d(a,b)},e&&e(d,h),d.prototype=Object.create(h.prototype,{constructor:g(d),_resolve:g(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a}),toString:g(function(){return"[object Array Iterator]"})})},{"./":38,d:2,"es5-ext/object/set-prototype-of":26,"es5-ext/string/#/contains":31}],36:[function(a,b,c){"use strict";var d=a("es5-ext/function/is-arguments"),e=a("es5-ext/object/valid-callable"),f=a("es5-ext/string/is-string"),g=a("./get"),h=Array.isArray,i=Function.prototype.call,j=Array.prototype.some;b.exports=function(a,b){var c,k,l,m,n,o,p,q,r=arguments[2];if(h(a)||d(a)?c="array":f(a)?c="string":a=g(a),e(b),l=function(){m=!0},"array"===c)return void j.call(a,function(a){return i.call(b,r,a,l),m?!0:void 0});if("string"!==c)for(k=a.next();!k.done;){if(i.call(b,r,k.value,l),m)return;k=a.next()}else for(o=a.length,n=0;o>n&&(p=a[n],o>n+1&&(q=p.charCodeAt(0),q>=55296&&56319>=q&&(p+=a[++n])),i.call(b,r,p,l),!m);++n);}},{"./get":37,"es5-ext/function/is-arguments":5,"es5-ext/object/valid-callable":29,"es5-ext/string/is-string":34}],37:[function(a,b,c){"use strict";var d=a("es5-ext/function/is-arguments"),e=a("es5-ext/string/is-string"),f=a("./array"),g=a("./string"),h=a("./valid-iterable"),i=a("es6-symbol").iterator;b.exports=function(a){return"function"==typeof h(a)[i]?a[i]():d(a)?new f(a):e(a)?new g(a):new f(a)}},{"./array":35,"./string":40,"./valid-iterable":41,"es5-ext/function/is-arguments":5,"es5-ext/string/is-string":34,"es6-symbol":49}],38:[function(a,b,c){"use strict";var d,e=a("es5-ext/array/#/clear"),f=a("es5-ext/object/assign"),g=a("es5-ext/object/valid-callable"),h=a("es5-ext/object/valid-value"),i=a("d"),j=a("d/auto-bind"),k=a("es6-symbol"),l=Object.defineProperty,m=Object.defineProperties;b.exports=d=function(a,b){return this instanceof d?(m(this,{__list__:i("w",h(a)),__context__:i("w",b),__nextIndex__:i("w",0)}),void(b&&(g(b.on),b.on("_add",this._onAdd),b.on("_delete",this._onDelete),b.on("_clear",this._onClear)))):new d(a,b)},m(d.prototype,f({constructor:i(d),_next:i(function(){var a;if(this.__list__)return this.__redo__&&(a=this.__redo__.shift(),void 0!==a)?a:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:i(function(){return this._createResult(this._next())}),_createResult:i(function(a){return void 0===a?{done:!0,value:void 0}:{done:!1,value:this._resolve(a)}}),_resolve:i(function(a){return this.__list__[a]}),_unBind:i(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:i(function(){return"[object Iterator]"})},j({_onAdd:i(function(a){if(!(a>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void l(this,"__redo__",i("c",[a]));this.__redo__.forEach(function(b,c){b>=a&&(this.__redo__[c]=++b)},this),this.__redo__.push(a)}}),_onDelete:i(function(a){var b;a>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(b=this.__redo__.indexOf(a),-1!==b&&this.__redo__.splice(b,1),this.__redo__.forEach(function(b,c){b>a&&(this.__redo__[c]=--b)},this)))}),_onClear:i(function(){this.__redo__&&e.call(this.__redo__),this.__nextIndex__=0})}))),l(d.prototype,k.iterator,i(function(){return this})),l(d.prototype,k.toStringTag,i("","Iterator"))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":3,"es5-ext/object/assign":12,"es5-ext/object/valid-callable":29,"es5-ext/object/valid-value":30,"es6-symbol":49}],39:[function(a,b,c){"use strict";var d=a("es5-ext/function/is-arguments"),e=a("es5-ext/string/is-string"),f=a("es6-symbol").iterator,g=Array.isArray;b.exports=function(a){return null==a?!1:g(a)?!0:e(a)?!0:d(a)?!0:"function"==typeof a[f]}},{"es5-ext/function/is-arguments":5,"es5-ext/string/is-string":34,"es6-symbol":49}],40:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/set-prototype-of"),f=a("d"),g=a("./"),h=Object.defineProperty;d=b.exports=function(a){return this instanceof d?(a=String(a),g.call(this,a),void h(this,"__length__",f("",a.length))):new d(a)},e&&e(d,g),d.prototype=Object.create(g.prototype,{constructor:f(d),_next:f(function(){return this.__list__?this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind():void 0}),_resolve:f(function(a){var b,c=this.__list__[a];return this.__nextIndex__===this.__length__?c:(b=c.charCodeAt(0),b>=55296&&56319>=b?c+this.__list__[this.__nextIndex__++]:c)}),toString:f(function(){return"[object String Iterator]"})})},{"./":38,d:2,"es5-ext/object/set-prototype-of":26}],41:[function(a,b,c){"use strict";var d=a("./is-iterable");b.exports=function(a){if(!d(a))throw new TypeError(a+" is not iterable");return a}},{"./is-iterable":39}],42:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Map:a("./polyfill")},{"./is-implemented":43,"./polyfill":47}],43:[function(a,b,c){"use strict";b.exports=function(){var a,b,c;if("function"!=typeof Map)return!1;try{a=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(d){return!1}return"[object Map]"!==String(a)?!1:3!==a.size?!1:"function"!=typeof a.clear?!1:"function"!=typeof a["delete"]?!1:"function"!=typeof a.entries?!1:"function"!=typeof a.forEach?!1:"function"!=typeof a.get?!1:"function"!=typeof a.has?!1:"function"!=typeof a.keys?!1:"function"!=typeof a.set?!1:"function"!=typeof a.values?!1:(b=a.entries(),c=b.next(),c.done!==!1?!1:c.value?"raz"!==c.value[0]?!1:"one"!==c.value[1]?!1:!0:!1)}},{}],44:[function(a,b,c){"use strict";b.exports=function(){return"undefined"==typeof Map?!1:"[object Map]"===Object.prototype.toString.call(new Map)}()},{}],45:[function(a,b,c){"use strict";b.exports=a("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":25}],46:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/set-prototype-of"),f=a("d"),g=a("es6-iterator"),h=a("es6-symbol").toStringTag,i=a("./iterator-kinds"),j=Object.defineProperties,k=g.prototype._unBind;d=b.exports=function(a,b){return this instanceof d?(g.call(this,a.__mapKeysData__,a),b&&i[b]||(b="key+value"),void j(this,{__kind__:f("",b),__values__:f("w",a.__mapValuesData__)})):new d(a,b)},e&&e(d,g),d.prototype=Object.create(g.prototype,{constructor:f(d),_resolve:f(function(a){return"value"===this.__kind__?this.__values__[a]:"key"===this.__kind__?this.__list__[a]:[this.__list__[a],this.__values__[a]]}),_unBind:f(function(){this.__values__=null,k.call(this)}),toString:f(function(){return"[object Map Iterator]"})}),Object.defineProperty(d.prototype,h,f("c","Map Iterator"))},{"./iterator-kinds":45,d:2,"es5-ext/object/set-prototype-of":26,"es6-iterator":38,"es6-symbol":49}],47:[function(a,b,c){"use strict";var d,e=a("es5-ext/array/#/clear"),f=a("es5-ext/array/#/e-index-of"),g=a("es5-ext/object/set-prototype-of"),h=a("es5-ext/object/valid-callable"),i=a("es5-ext/object/valid-value"),j=a("d"),k=a("event-emitter"),l=a("es6-symbol"),m=a("es6-iterator/valid-iterable"),n=a("es6-iterator/for-of"),o=a("./lib/iterator"),p=a("./is-native-implemented"),q=Function.prototype.call,r=Object.defineProperties,s=Object.getPrototypeOf;b.exports=d=function(){var a,b,c,e=arguments[0];if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return c=p&&g&&Map!==d?g(new Map,s(this)):this,null!=e&&m(e),r(c,{__mapKeysData__:j("c",a=[]),__mapValuesData__:j("c",b=[])}),e?(n(e,function(c){var d=i(c)[0];c=c[1],-1===f.call(a,d)&&(a.push(d),b.push(c))},c),c):c},p&&(g&&g(d,Map),d.prototype=Object.create(Map.prototype,{constructor:j(d)})),k(r(d.prototype,{clear:j(function(){this.__mapKeysData__.length&&(e.call(this.__mapKeysData__),e.call(this.__mapValuesData__),this.emit("_clear"))}),"delete":j(function(a){var b=f.call(this.__mapKeysData__,a);return-1===b?!1:(this.__mapKeysData__.splice(b,1),this.__mapValuesData__.splice(b,1),this.emit("_delete",b,a),!0)}),entries:j(function(){return new o(this,"key+value")}),forEach:j(function(a){var b,c,d=arguments[1];for(h(a),b=this.entries(),c=b._next();void 0!==c;)q.call(a,d,this.__mapValuesData__[c],this.__mapKeysData__[c],this),c=b._next()}),get:j(function(a){var b=f.call(this.__mapKeysData__,a);if(-1!==b)return this.__mapValuesData__[b]}),has:j(function(a){return-1!==f.call(this.__mapKeysData__,a)}),keys:j(function(){return new o(this,"key")}),set:j(function(a,b){var c,d=f.call(this.__mapKeysData__,a);return-1===d&&(d=this.__mapKeysData__.push(a)-1,c=!0),this.__mapValuesData__[d]=b,c&&this.emit("_add",d,a),this}),size:j.gs(function(){return this.__mapKeysData__.length}),values:j(function(){return new o(this,"value")}),toString:j(function(){return"[object Map]"})})),Object.defineProperty(d.prototype,l.iterator,j(function(){return this.entries()})),Object.defineProperty(d.prototype,l.toStringTag,j("c","Map"))},{"./is-native-implemented":44,"./lib/iterator":46,d:2,"es5-ext/array/#/clear":3,"es5-ext/array/#/e-index-of":4,"es5-ext/object/set-prototype-of":26,"es5-ext/object/valid-callable":29,"es5-ext/object/valid-value":30,"es6-iterator/for-of":36,"es6-iterator/valid-iterable":41,"es6-symbol":49,"event-emitter":54}],48:[function(b,c,d){(function(d,e){(function(){"use strict";function f(a){return"function"==typeof a||"object"==typeof a&&null!==a}function g(a){return"function"==typeof a}function h(a){return"object"==typeof a&&null!==a}function i(a){U=a}function j(a){Y=a}function k(){return function(){d.nextTick(p)}}function l(){return function(){T(p)}}function m(){var a=0,b=new _(p),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function n(){var a=new MessageChannel;return a.port1.onmessage=p,function(){a.port2.postMessage(0)}}function o(){return function(){setTimeout(p,1)}}function p(){for(var a=0;X>a;a+=2){var b=ca[a],c=ca[a+1];b(c),ca[a]=void 0,ca[a+1]=void 0}X=0}function q(){try{var a=b,c=a("vertx");return T=c.runOnLoop||c.runOnContext,l()}catch(d){return o()}}function r(){}function s(){return new TypeError("You cannot resolve a promise with itself")}function t(){return new TypeError("A promises callback cannot return that same promise.")}function u(a){try{return a.then}catch(b){return ga.error=b,ga}}function v(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function w(a,b,c){Y(function(a){var d=!1,e=v(c,b,function(c){d||(d=!0,b!==c?z(a,c):B(a,c))},function(b){d||(d=!0,C(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,C(a,e))},a)}function x(a,b){b._state===ea?B(a,b._result):b._state===fa?C(a,b._result):D(b,void 0,function(b){z(a,b)},function(b){C(a,b)})}function y(a,b){if(b.constructor===a.constructor)x(a,b);else{var c=u(b);c===ga?C(a,ga.error):void 0===c?B(a,b):g(c)?w(a,b,c):B(a,b)}}function z(a,b){a===b?C(a,s()):f(b)?y(a,b):B(a,b)}function A(a){a._onerror&&a._onerror(a._result),E(a)}function B(a,b){a._state===da&&(a._result=b,a._state=ea,0!==a._subscribers.length&&Y(E,a))}function C(a,b){a._state===da&&(a._state=fa,a._result=b,Y(A,a))}function D(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ea]=c,e[f+fa]=d,0===f&&a._state&&Y(E,a)}function E(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?H(c,d,e,f):e(f);a._subscribers.length=0}}function F(){this.error=null}function G(a,b){try{return a(b)}catch(c){return ha.error=c,ha}}function H(a,b,c,d){var e,f,h,i,j=g(c);if(j){if(e=G(c,d),e===ha?(i=!0,f=e.error,e=null):h=!0,b===e)return void C(b,t())}else e=d,h=!0;b._state!==da||(j&&h?z(b,e):i?C(b,f):a===ea?B(b,e):a===fa&&C(b,e))}function I(a,b){try{b(function(b){z(a,b)},function(b){C(a,b)})}catch(c){C(a,c)}}function J(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(r),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?B(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&B(c.promise,c._result))):C(c.promise,c._validationError())}function K(a){return new ia(this,a).promise}function L(a){function b(a){z(e,a)}function c(a){C(e,a)}var d=this,e=new d(r);if(!W(a))return C(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===da&&f>g;g++)D(d.resolve(a[g]),void 0,b,c);return e}function M(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(r);return z(c,a),c}function N(a){var b=this,c=new b(r);return C(c,a),c}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Q(a){this._id=na++,this._state=void 0,this._result=void 0,this._subscribers=[],r!==a&&(g(a)||O(),this instanceof Q||P(),I(this,a))}function R(){var a;if("undefined"!=typeof e)a=e;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;(!c||"[object Promise]"!==Object.prototype.toString.call(c.resolve())||c.cast)&&(a.Promise=oa)}var S;S=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var T,U,V,W=S,X=0,Y=({}.toString,function(a,b){ca[X]=a,ca[X+1]=b,X+=2,2===X&&(U?U(p):V())}),Z="undefined"!=typeof window?window:void 0,$=Z||{},_=$.MutationObserver||$.WebKitMutationObserver,aa="undefined"!=typeof d&&"[object process]"==={}.toString.call(d),ba="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ca=new Array(1e3);V=aa?k():_?m():ba?n():void 0===Z&&"function"==typeof b?q():o();var da=void 0,ea=1,fa=2,ga=new F,ha=new F;J.prototype._validateInput=function(a){return W(a)},J.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},J.prototype._init=function(){this._result=new Array(this.length)};var ia=J;J.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===da&&b>e;e++)a._eachEntry(d[e],e)},J.prototype._eachEntry=function(a,b){var c=this,d=c._instanceConstructor;h(a)?a.constructor===d&&a._state!==da?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(d.resolve(a),b):(c._remaining--,c._result[b]=a)},J.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===da&&(d._remaining--,a===fa?C(e,c):d._result[b]=c),0===d._remaining&&B(e,d._result)},J.prototype._willSettleAt=function(a,b){var c=this;D(a,void 0,function(a){c._settledAt(ea,b,a)},function(a){c._settledAt(fa,b,a)})};var ja=K,ka=L,la=M,ma=N,na=0,oa=Q;Q.all=ja,Q.race=ka,Q.resolve=la,Q.reject=ma,Q._setScheduler=i,Q._setAsap=j,Q._asap=Y,Q.prototype={constructor:Q,then:function(a,b){var c=this,d=c._state;if(d===ea&&!a||d===fa&&!b)return this;var e=new this.constructor(r),f=c._result;if(d){var g=arguments[d-1];Y(function(){H(d,e,g,f)})}else D(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var pa=R,qa={Promise:oa,polyfill:pa};"function"==typeof a&&a.amd?a(function(){return qa}):"undefined"!=typeof c&&c.exports?c.exports=qa:"undefined"!=typeof this&&(this.ES6Promise=qa),pa()}).call(this)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:65}],49:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Symbol:a("./polyfill")},{"./is-implemented":50,"./polyfill":52}],50:[function(a,b,c){"use strict";b.exports=function(){var a;if("function"!=typeof Symbol)return!1;a=Symbol("test symbol");try{String(a)}catch(b){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],51:[function(a,b,c){"use strict";b.exports=function(a){return a&&("symbol"==typeof a||"Symbol"===a["@@toStringTag"])||!1}},{}],52:[function(a,b,c){"use strict";var d,e,f,g=a("d"),h=a("./validate-symbol"),i=Object.create,j=Object.defineProperties,k=Object.defineProperty,l=Object.prototype,m=i(null);"function"==typeof Symbol&&(d=Symbol);var n=function(){var a=i(null);return function(b){for(var c,d,e=0;a[b+(e||"")];)++e;return b+=e||"",a[b]=!0,c="@@"+b,k(l,c,g.gs(null,function(a){d||(d=!0,k(this,c,g(a)),d=!1)})),c}}();f=function(a){if(this instanceof f)throw new TypeError("TypeError: Symbol is not a constructor");return e(a)},b.exports=e=function o(a){var b;if(this instanceof o)throw new TypeError("TypeError: Symbol is not a constructor");return b=i(f.prototype),a=void 0===a?"":String(a),j(b,{__description__:g("",a),__name__:g("",n(a))})},j(e,{"for":g(function(a){return m[a]?m[a]:m[a]=e(String(a))}),keyFor:g(function(a){var b;h(a);for(b in m)if(m[b]===a)return b}),hasInstance:g("",d&&d.hasInstance||e("hasInstance")),isConcatSpreadable:g("",d&&d.isConcatSpreadable||e("isConcatSpreadable")),iterator:g("",d&&d.iterator||e("iterator")),match:g("",d&&d.match||e("match")),replace:g("",d&&d.replace||e("replace")),search:g("",d&&d.search||e("search")),species:g("",d&&d.species||e("species")),split:g("",d&&d.split||e("split")),toPrimitive:g("",d&&d.toPrimitive||e("toPrimitive")),toStringTag:g("",d&&d.toStringTag||e("toStringTag")),unscopables:g("",d&&d.unscopables||e("unscopables"))}),j(f.prototype,{constructor:g(e),toString:g("",function(){return this.__name__})}),j(e.prototype,{toString:g(function(){return"Symbol ("+h(this).__description__+")"}),valueOf:g(function(){return h(this)})}),k(e.prototype,e.toPrimitive,g("",function(){return h(this)})),k(e.prototype,e.toStringTag,g("c","Symbol")),k(f.prototype,e.toStringTag,g("c",e.prototype[e.toStringTag])),k(f.prototype,e.toPrimitive,g("c",e.prototype[e.toPrimitive]))},{"./validate-symbol":53,d:2}],53:[function(a,b,c){"use strict";var d=a("./is-symbol");b.exports=function(a){if(!d(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":51}],54:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=a("d"),l=a("es5-ext/object/valid-callable"),m=Function.prototype.apply,n=Function.prototype.call,o=Object.create,p=Object.defineProperty,q=Object.defineProperties,r=Object.prototype.hasOwnProperty,s={configurable:!0,enumerable:!1,writable:!0};d=function(a,b){var c;return l(b),r.call(this,"__ee__")?c=this.__ee__:(c=s.value=o(null),p(this,"__ee__",s),s.value=null),c[a]?"object"==typeof c[a]?c[a].push(b):c[a]=[c[a],b]:c[a]=b,this},e=function(a,b){var c,e;return l(b),e=this,d.call(this,a,c=function(){f.call(e,a,c),m.call(b,this,arguments)}),c.__eeOnceListener__=b,this},f=function(a,b){var c,d,e,f;if(l(b),!r.call(this,"__ee__"))return this;if(c=this.__ee__,!c[a])return this;if(d=c[a],"object"==typeof d)for(f=0;e=d[f];++f)(e===b||e.__eeOnceListener__===b)&&(2===d.length?c[a]=d[f?0:1]:d.splice(f,1));else(d===b||d.__eeOnceListener__===b)&&delete c[a];return this},g=function(a){var b,c,d,e,f;if(r.call(this,"__ee__")&&(e=this.__ee__[a]))if("object"==typeof e){for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];for(e=e.slice(),b=0;d=e[b];++b)m.call(d,this,f)}else switch(arguments.length){case 1:n.call(e,this);break;case 2:n.call(e,this,arguments[1]);break;case 3:n.call(e,this,arguments[1],arguments[2]);break;default:for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];m.call(e,this,f)}},h={on:d,once:e,off:f,emit:g},i={on:k(d),once:k(e),off:k(f),emit:k(g)},j=q({},i),b.exports=c=function(a){return null==a?o(j):q(Object(a),i)},c.methods=h},{d:2,"es5-ext/object/valid-callable":29}],55:[function(a,b,c){"use strict";b.exports=a("./src/squish")},{"./src/squish":56}],56:[function(a,b,c){"use strict";function d(a){return void 0!==a&&null!==a}function e(a){return d(a)&&a.constructor===Number}function f(a){return d(a)&&a.constructor===Array}function g(a){return d(a)&&a.constructor===Object}function h(a){return d(a)&&a.constructor===Function}function i(a){if(a=a||{},this.result={},h(a.stopWhen)&&(this.stopWhen=a.stopWhen),d(a.includeArrays)&&(this.includeArrays=a.includeArrays),e(a.depth)&&a.depth>=0&&(this.depth=a.depth),d(a.seperator)&&(this.seperator=a.seperator),d(a.modifyKey))switch(a.modifyKey){case"uppercase":this.modifyKey=function(a){return a.toUpperCase()};break;case"lowercase":this.modifyKey=function(a){return a.toLowerCase()};break;default:this.modifyKey=a.modifyKey}}i.prototype={constructor:i,result:null,includeArrays:!1,depth:1/0,seperator:"."},i.prototype.modifyKey=function(a){return a},i.prototype.isEnumerable=function(a){return this.includeArrays?g(a)||f(a):g(a)},i.prototype.limitReached=function(a){return a>=this.depth},i.prototype.stopWhen=function(a){return!1},i.prototype.flatten=function(a,b,c){var e,f,g;d(b)?b+=this.seperator:b="",d(c)?c+=1:c=0;for(f in a)g=a[f],e=b+this.modifyKey(f),this.limitReached(c)||this.stopWhen(g)||!this.isEnumerable(g)?this.result[e]=a[f]:this.flatten(g,e,c);return this.result},b.exports=function(a,b){var c=new i(b);return c.isEnumerable(a)?c.flatten(a):a}},{}],57:[function(a,b,c){"use strict";b.exports=a("./src/main")},{"./src/main":62}],58:[function(a,b,c){"use strict";function d(a){this._data=a,this._functions().forEach(function(a){var b=this[a];this[a]=function(){var a=b.apply(this,arguments);return this._negate?!a:a}},this)}var e=a("./get"),f=a("./utils");d.prototype={constructor:d,_data:null,_negate:!1,_deep:!1,_functions:function(){var a,b=[];for(a in d.prototype)/^_/.test(a)||"function"!=typeof d.prototype[a]||b.push(a);return b},equals:function(a){return this._data===a},truthy:function(){return!!this._data},falsy:function(){return!this._data},"typeof":function(a){return typeof this._data===a},kindof:function(a){return f.kindof(this._data)===a},"instanceof":function(a){return this._data instanceof a},lt:function(a){return this._data<a},lte:function(a){return this._data<=a},gt:function(a){return this._data>a},gte:function(a){return this._data>=a}},Object.defineProperty(d.prototype,"is",{get:function(){return this._negate=!1,this}}),Object.defineProperty(d.prototype,"not",{get:function(){return this._negate=!0,this}}),Object.defineProperty(d.prototype,"defined",{get:function(){return this._negate?void 0===this._data:void 0!==this._data}}),Object.defineProperty(d.prototype,"undefined",{get:function(){return!this.defined}}),Object.defineProperty(d.prototype,"null",{
get:function(){return this._negate?null!==this._data:null===this._data}}),Object.defineProperty(d.prototype,"value",{get:function(){return this._negate?!f.isValue(this._data):f.isValue(this._data)}}),Object.defineProperty(d.prototype,"primitive",{get:function(){var a;return f.isValue(this._data)?(a=this["typeof"]("string")||this["typeof"]("number")||this["typeof"]("boolean"),this._negate?!a:a):!this._negate}}),b.exports=function(a,b){var c;return c=2===arguments.length?e(a,b):a,new d(c)}},{"./get":61,"./utils":64}],59:[function(a,b,c){"use strict";var d={seperator:"."},e=function(a){return d[a]},f=function(a,b){d[a]=b},g=function(a){var b;for(b in a)a.hasOwnProperty(b)&&(d[b]=b)};b.exports=function(){var a=Array.prototype.slice.call(arguments);return 2===a.length?f.apply(null,a):"string"==typeof a[0]?e.apply(null,a):"object"==typeof a[0]?g.apply(null,a):void 0},b.exports.get=e,b.exports.set=f},{}],60:[function(a,b,c){"use strict";var d=a("./utils");b.exports=function(a,b,c){return 2===arguments.length?d.isValue(a)?a:b:d.split(b,a,function(a,b,e,f){return f?a[b]=d.isValue(e)?e:c:a[b]=d.isValue(e)?e:{}})}},{"./utils":64}],61:[function(a,b,c){"use strict";var d=a("./utils");b.exports=function(a,b,c){var e=3===arguments.length;return d.isValue(a)&&d.isValue(b)?d.split(b,a,function(a,b,f,g){return g?d.isValue(f)?f:e?c:f:d.isValue(f)?f:{}}):a}},{"./utils":64}],62:[function(a,b,c){"use strict";b.exports={ensure:a("./ensure"),get:a("./get"),set:a("./set"),check:a("./check"),config:a("./configuration")}},{"./check":58,"./configuration":59,"./ensure":60,"./get":61,"./set":63}],63:[function(a,b,c){"use strict";var d=a("./utils");b.exports=function(a,b,c){return d.isValue(a)||(a={}),d.split(b,a,function(b,e,f,g){return g?(b[e]=c,a):b[e]=d.isValue(f)?f:{}})}},{"./utils":64}],64:[function(a,b,c){"use strict";var d=a("./configuration"),e=b.exports.isValue=function(a){return null!=a},f=(b.exports.kindof=function(a){return e(a)?a.constructor===Array?"array":a.constructor.name?a.constructor.name.toLowerCase():typeof a:null===a?"null":"undefined"},function(a,b){return a===b-1});b.exports.split=function(a,b,c){var e=d.get("seperator");return a.split(e).reduce(function(a,b,d,e){return c(a,b,a[b],f(d,e.length))},b)}},{"./configuration":59}],65:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],66:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var f=a("./utils"),g=a("./validation-error"),h=function(){function a(b){d(this,a),this.options=b||{}}return e(a,[{key:"error",value:function(a){var b=new g.ValidationError({type:a,path:this.options.path||""});return f.Promise.reject(b)}}]),a}();c["default"]=h},{"./utils":72,"./validation-error":73}],67:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){var b=function(b){function c(){e(this,c);var b=f(this,Object.getPrototypeOf(c).apply(this,arguments));return b.constraints=b.setupConstraints(a.constraints),b.transforms=b.setupTransforms(),b}return g(c,b),k(c,[{key:"check",value:function(b){return(a.check||l(Object.getPrototypeOf(c.prototype),"check",this))(b)}},{key:"cast",value:function(b){return(a.cast||l(Object.getPrototypeOf(c.prototype),"cast",this))(b)}}]),c}(o["default"]),c=(0,m.ensureArray)(a.aliases);if(!c.length)throw new Error("options.aliases is required when defining a data type");c.forEach(function(a){if(p.has(a))throw new Error("A data type with alias "+a+" already exists");p.set(a,b)})}function i(a,b){"object"!==("undefined"==typeof a?"undefined":j(a))&&(a={$type:a});var c=a.$type,d=p.get(c);if(!d)throw new Error("Data type could not be found for the alias: "+c);return b.path||(b.path=""),new d(a,b)}var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function q(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:q(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)};Object.defineProperty(c,"__esModule",{value:!0}),c.Types=void 0,c.defineType=h,c.createTypeValidator=i;var m=a("./utils"),n=a("./data-validator"),o=d(n),p=new m.Map;c.Types={Any:Symbol("any"),String:Symbol("string"),Number:Symbol("number"),Boolean:Symbol("boolean"),Date:Symbol("date")}},{"./data-validator":68,"./utils":72}],68:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./utils"),k=a("./abstract-validator"),l=d(k),m=a("./validation-result"),n=d(m),o=function(a){function b(a,c){f(this,b);var d=g(this,Object.getPrototypeOf(b).call(this,c));return d.definition=a,d}return h(b,a),i(b,[{key:"check",value:function(){return!0}},{key:"cast",value:function(a){return a}},{key:"setupConstraints",value:function(a){var b=this;return Object.keys(a||{}).filter(function(a){return a in b.definition}).reduce(function(c,d){var f=b.definition[d],g=a[d];return[{opts:f,fn:g}].concat(e(c))},[])}},{key:"setupTransforms",value:function(){return(0,j.ensureArray)(this.definition.$transform).filter(j.isFunction)}},{key:"validate",value:function(a,b){var c=(0,j.clone)(b);return c.path=this.options.path,(0,j.isMissing)(a)?this.validateMissing(a,c):this.validateData(a,c)}},{key:"getDefaultValue",value:function(){var a=this.definition.$default;return"function"==typeof a?a():a}},{key:"validateMissing",value:function(a,b){var c=!!this.definition.$required,d="$default"in this.definition,e=null;return c&&!d?this.error("missing"):(b.value=d?this.getDefaultValue():a,b.required=c,e=new n["default"](b),j.Promise.resolve(e))}},{key:"validateData",value:function(a,b){var c=this,d=void 0;return d="$cast"in this.definition?!!this.definition.$cast:!!b.cast,d&&(a=this.cast(a)),this.check(a)?this.applyconstraints(a).then(function(){return b.value=c.transform(a),new n["default"](b)}):this.error("invalid")}},{key:"applyconstraints",value:function(a){for(var b=this.constraints,c=0;c<b.length;c+=1){var d=b[c],e=d.fn,f=d.opts;if(!e(a,f))return this.error("invalid")}return j.Promise.resolve()}},{key:"transform",value:function(a){return this.transforms.reduce(function(a,b){return b(a)},a)}}]),b}(l["default"]);b.exports=o},{"./abstract-validator":66,"./utils":72,"./validation-result":74}],69:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){return new(Function.prototype.bind.apply(j["default"],[null].concat(Array.prototype.slice.call(arguments))))}function f(a){if(a.aliases=(0,h.ensureArray)(a.aliases),!a.aliases.length)throw new Error("options.aliases requires at least one alias");(0,k.defineType)(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.ValidationError=c.Types=void 0;var g=a("./validation-error");Object.defineProperty(c,"ValidationError",{enumerable:!0,get:function(){return g.ValidationError}}),c.Schema=e,c.createDataType=f;var h=a("./utils"),i=a("./schema"),j=d(i),k=a("./data-types");c.Types=k.Types,f({aliases:[k.Types.Any]}),f({check:function(a){return"string"==typeof a},cast:function(a){return""+a},aliases:[k.Types.String,String],constraints:{$minlength:function(a,b){return a.length>=b},$maxlength:function(a,b){return a.length<=b},$fixedwidth:function(a,b){return a.length===b},$regex:function(a,b){return b.test(a)}}}),f({check:function(a){return!(0,h.isNan)(a)},cast:function(a){return parseFloat(a)},aliases:[k.Types.Number,Number],constraints:{$gt:function(a,b){return a>b},$gte:function(a,b){return a>=b},$lt:function(a,b){return b>a},$lte:function(a,b){return b>=a},$eq:function(a,b){return a===b},$neq:function(a,b){return a!==b}}}),f({check:function(a){return"boolean"==typeof a},cast:function(a){return!!a},aliases:[k.Types.Boolean,Boolean],constraints:{$eq:function(a,b){return a===b},$neq:function(a,b){return a!==b}}}),f({check:function(a){return a instanceof Date&&"Invalid Date"!==a.toString()},cast:function(a){return new Date(a)},aliases:[k.Types.Date,Date],constraints:{$gt:function(a,b){return a>b},$lt:function(a,b){return b>a}}})},{"./data-types":67,"./schema":71,"./utils":72,"./validation-error":73}],70:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var i=a("object-squish"),j=d(i),k=a("ok-js"),l=d(k),m=a("./utils"),n=a("./abstract-validator"),o=d(n),p=a("./validation-result"),q=d(p),r=a("./data-types"),s=function(a){function b(a,c){e(this,b);var d=f(this,Object.getPrototypeOf(b).call(this,c));return d.definition=null,d.validators=null,d.definition=d.getDefinition(a),d.compile(),d}return g(b,a),h(b,[{key:"getDefinition",value:function(a){return(0,m.isArray)(a)?(this.options.isArray=!0,this.getDefinition(a.shift())):(0,m.isSchema)(a)?(a._validator.options.isArray&&(this.options.isArray=!0),this.getDefinition(a._validator.definition)):((0,m.isPlainObject)(a)||(a={$type:a}),a)}},{key:"createPromises",value:function(a){var b=this,c=Object.keys(this.validators);return a.reduce(function(a,d,e){return c.map(function(a){var c=b.options.isArray?e:null,f=b.validators[a],g=l["default"].get(d,a||null),h={index:c,cast:b.options.cast};return f.validate(g,h)}).concat(a)},[])}},{key:"compile",value:function(){var a=(0,m.isEndpoint)(this.definition)?{"":this.definition}:(0,j["default"])(this.definition,{stopWhen:m.isEndpoint}),c=Object.keys(a);this.validators=c.reduce(function(c,d){var e=a[d];return(0,m.isSchema)(e)||(0,m.isArray)(e)?c[d]=new b(e,{path:d}):c[d]=(0,r.createTypeValidator)(e,{path:d}),c},{})}},{key:"validate",value:function(a,b){var c=this,d=(0,m.isArray)(a),e=(0,m.clone)(b);if(d!==!!this.options.isArray)return this.error("invalid");d||(a=[a]);var f=this.createPromises(a);return m.Promise.all(f).then(function(a){return e.value=c.inflate(a),e.path=c.options.path,new q["default"](e)})}},{key:"inflate",value:function(a){return this.options.isArray?q["default"].inflateArray(a):q["default"].inflateObject(a)}}]),b}(o["default"]);c["default"]=s},{"./abstract-validator":66,"./data-types":67,"./utils":72,"./validation-result":74,"object-squish":55,"ok-js":57}],71:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var g=a("./utils"),h=a("./schema-validator"),i=d(h),j=function(){function a(b,c){e(this,a),this._validator=new i["default"](b,c),this._isPuritySchema_=!0}return f(a,[{key:"_validateUsingCallback",value:function(a,b){this._validator.validate(a)["catch"](b).then(function(a){return b(null,a.value)})}},{key:"_validateUsingPromise",value:function(a,b){var c=this;return new g.Promise(function(b,d){c._validateUsingCallback(a,function(a,c){return a?d(a):b(c)})})}},{key:"validate",value:function(){return 2===arguments.length?this._validateUsingCallback.apply(this,arguments):this._validateUsingPromise.apply(this,arguments)}}]),a}();c["default"]=j},{"./schema-validator":70,"./utils":72}],72:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.clone=c.ensureArray=c.isMissing=c.identity=c.isEndpoint=c.isNan=c.isPlainObject=c.isFunction=c.isArray=c.isSchema=c.isValue=c.Map=c.Promise=void 0;var e=a("es6-promise");Object.defineProperty(c,"Promise",{enumerable:!0,get:function(){return e.Promise}});var f=a("es6-map"),g=d(f);c.Map=g["default"];var h=c.isValue=function(a){return null!=a},i=(c.isSchema=function(a){return h(a)&&a._isPuritySchema_},c.isArray=function(a){return Array.isArray(a)}),j=(c.isFunction=function(a){return"function"==typeof a},c.isPlainObject=function(a){return h(a)&&a.constructor===Object});c.isNan=function(a){return a!==a||"number"!=typeof a},c.isEndpoint=function(a){return j(a)&&"$type"in a},c.identity=function(a){return a},c.isMissing=function(a){return!h(a)||""===a},c.ensureArray=function(a){return h(a)?i(a)?a:[a]:[]},c.clone=function(a){var b={},c=a||{};for(var d in c)b[d]=c[d];return b}},{"es6-map":42,"es6-promise":48}],73:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return a.replace(/\${(path)}/gi,this.path).replace(/\${(errorType)}/,this.type)}Object.defineProperty(c,"__esModule",{value:!0});var f={missing:"Missing required field ${path}",invalid:"Invalid data ${path}"};c.ValidationError=function g(a){d(this,g),this.type=a.type,this.path=a.path;var b=f[this.type];this.message=e.call(this,b)}},{}],74:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var g=a("ok-js"),h=d(g),i=function(){function a(b){e(this,a),this.options=b||{}}return f(a,[{key:"required",get:function(){return!!this.options.required}},{key:"index",get:function(){return"number"==typeof this.options.index?this.options.index:null}},{key:"value",get:function(){return this.options.value}},{key:"path",get:function(){return this.options.path||""}}],[{key:"inflateArray",value:function(b){for(var c=[],d=0;d<b.length;d+=1){var e=b[d],f=e.index,g=c[f]||[];g.push(e),c[f]=g}return c.map(a.inflateObject)}},{key:"inflateObject",value:function(a){if(1===a.length&&!a[0].path)return a[0].value;for(var b={},c=0;c<a.length;c+=1){var d=a[c],e=d.path,f=d.value;d.required||"undefined"!=typeof f?h["default"].set(b,e,f):h["default"].ensure(b,e.replace(/\.[^.]+$/,""),{})}return b}}]),a}();c["default"]=i},{"ok-js":57}]},{},[69])(69)});